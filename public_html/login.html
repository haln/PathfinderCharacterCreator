<?php require 'php/header.php'; ?>
         
        <!-- The Account log in Page Content -->
        <div class="content">
            <h2>Account Log In</h2>
            <form id="signin" onsubmit="event.preventDefault();return validateForm();">
                <fieldset name="signupFieldset">
                    <legend>Log In</legend>
                    <label for="username" id="usernameLabel">Username</label>
                    <input type="text" id="username" name="username" required="required">
                    <br/>
                    <label for="password" id="passwordLabel">Password</label>
                    <input type="password" id="password" name="password" required="required">
                    <br/>
                    <input type="submit" id="submitBtn">
                </fieldset>
            </form>
            <span id="error"></span>
        </div>
        <script src="js/jquery-2.1.3.min.js"></script>
        <script type="text/javascript">
            function validateForm(){
                var user_name = $("#username").val();
                var pass_word = $("#password").val();
                $.post("php/login.php", {username: user_name, password: pass_word}).done(function (data){
                    if(data){
                        data = JSON.parse(data);
                        console.log("Returned data: " + data);
                        console.log("UserID: " + data["USER_ID"]);
                        localStorage.setItem("username", user_name);
                        localStorage.setItem("password", pass_word);
                        localStorage.setItem("userID", data["USER_ID"]);
                        $("#error").html("");
                        window.location.href = "index.html";
                    }
                    else{
                        $("#error").html("Username or password is incorrect");
                        return false;
                    }
                });
                
            }
        </script>
<?php require 'php/footer.php'; ?>

