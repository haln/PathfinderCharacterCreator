<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="en"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="en"><!--<![endif]-->
    <head>
        <title>Pathfinder Character Creator - Account Signup</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/animations.css">
    </head>
    <body>
        
         <!-- The Navigation Menu -->
        
            <div id="header">
                <a class="pathfinderLogo" href="index.html">Pathfinder Character Creator</a>
                <!--<h1>Pathfinder Character Creator</h1>-->
                <nav id="menu-nav">
                    <a class="link-home" href="index.html">Home</a>
                    <a class="link-wizard" href="characterWizard.html">Create a Character</a>
                    
                </nav>
                
                <div id="user-nav">
                    <a class="link-login" href="login.html">Log In</a>
                    <a class="link-signup" href="signup.html">Sign Up</a>
                    
                </div>
            </div>
         
        <!-- The Account Signup Page Content -->
        <div class="content">
            <h2>Account Signup</h2>
            <form id="signup" name="signup" action="confirmaccount.php" method="post">
                <fieldset name="signupFieldset">
                    <legend>Sign-up</legend>
                    <label for="username" id="usernameLabel">Username</label>
                    <input title="Your username must be at least 4 characters long"
                        type="text" id="username" name="username" required="required" 
                        pattern="(?=.*[A-Za-z\d]).{4,}">
                    <span id="usernameError"></span>
                    <br/>
                    <label for="password" id="passwordLabel">Password</label>
                    <input title="Your password must contain at least 6 characters that include UPPERCASE letters, lowercase letters and digits" 
                           type="password" id="password" name="password" 
                           required="required" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}" 
                           onchange="signup.confirmPassword.pattern = this.value;">
                    <br/>
                    <label for="confirmPassword" id="confirmPasswordLabel">Confirm Password</label>
                    <input title="Passwords do not match" 
                           type="password" id="confirmPassword" name="confirmpassword" 
                           required="required" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}">
                    <br/>
                    <label for="email" id="emailLabel">Email</label>
                    <input type="email" id="email" name="email">
                    <span id="emailError"></span>
                    <br/>
                    <input type="submit" id="submitBtn">
                </fieldset>
            </form>
        </div>
        <script src="js/jquery-2.1.3.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#username").keyup(function(e) {
                    var user_name = $(this).val();
                    console.log(user_name);
                    if(user_name.length < 4){
                        $("#usernameError").html('');
                        return;
                    }
                    var statement = 'SELECT USER_ID FROM USERS WHERE USER_NAME = "' + user_name + '"';
                    console.log(statement);
                    if(user_name.length >= 4){  
                        $("#usernameError").html('Checking if username available...');
                        /*
                        $.post("db_conn.php", {thequery: statement, select: "USER_ID", from: "USERS", where: "USER_NAME = \""+user_name+"\""}).done(function(data){
                            console.log(data);
                            $("#usernameError").html(data);
                        });
                        */
                        $.post("php/check_username.php", {username: user_name}).done(function(data){
                            console.log(data);
                            $("#usernameError").html(data);
                        });
                        
                    }
                });
                $("#email").keyup(function(e){
                    var e_mail = $(this).val();
                    console.log(e_mail);
                    $.post("php/check_email.php", {email: e_mail}).done(function(data){
                        console.log(data);
                        $("#emailError").html(data);
                    })
                })
            });
        </script>
            
    </body>
</html>
